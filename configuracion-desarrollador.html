<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuración para Desarrollador - JM Budget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            line-height: 1.6;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .hero {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
        }
        .hero h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #4CAF50;
        }
        .hero p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        .step {
            background: rgba(255, 255, 255, 0.1);
            margin: 20px 0;
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }
        .step h3 {
            color: #4CAF50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .step-number {
            background: #4CAF50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .highlight {
            background: rgba(255, 255, 0, 0.2);
            padding: 2px 5px;
            border-radius: 3px;
        }
        .warning {
            background: rgba(255, 193, 7, 0.2);
            border-left: 4px solid #FFC107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .success {
            background: rgba(76, 175, 80, 0.2);
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .info {
            background: rgba(33, 150, 243, 0.2);
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .btn {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 10px 5px;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #45a049;
        }
        .btn-secondary {
            background: #2196F3;
        }
        .btn-secondary:hover {
            background: #1976D2;
        }
        .btn-warning {
            background: #FF9800;
        }
        .btn-warning:hover {
            background: #F57C00;
        }
        .config-form {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }
        .nav-buttons {
            text-align: center;
            margin: 30px 0;
        }
        .benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .benefit-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .benefit-card i {
            font-size: 2em;
            color: #4CAF50;
            margin-bottom: 10px;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        .comparison-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
        }
        .comparison-card h4 {
            color: #4CAF50;
            margin-bottom: 15px;
        }
        .comparison-card ul {
            list-style: none;
            padding: 0;
        }
        .comparison-card li {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .comparison-card li:before {
            content: '✓';
            color: #4CAF50;
            margin-right: 10px;
        }
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1><i class="fas fa-cloud"></i> Configuración para Desarrollador</h1>
            <p>Configura Firebase una vez y permite que cualquier usuario se registre sin configuración técnica</p>
        </div>

        <div class="info">
            <h3><i class="fas fa-info-circle"></i> ¿Por qué Firebase Centralizado?</h3>
            <p>Con esta configuración, <strong>tú configuras Firebase una sola vez</strong> y todos los usuarios pueden registrarse directamente con su email y contraseña. Cada usuario tendrá sus datos privados y seguros, con sincronización automática entre dispositivos.</p>
        </div>

        <div class="comparison">
            <div class="comparison-card">
                <h4><i class="fas fa-times-circle"></i> Configuración Individual</h4>
                <ul>
                    <li>Cada usuario debe configurar Firebase</li>
                    <li>Complejo para usuarios no técnicos</li>
                    <li>Múltiples proyectos Firebase</li>
                    <li>Difícil de mantener</li>
                    <li>Barrera de entrada alta</li>
                </ul>
            </div>
            <div class="comparison-card">
                <h4><i class="fas fa-check-circle"></i> Firebase Centralizado</h4>
                <ul>
                    <li>Configuración única por el desarrollador</li>
                    <li>Registro directo para cualquier usuario</li>
                    <li>Un solo proyecto Firebase</li>
                    <li>Fácil de mantener y escalar</li>
                    <li>Experiencia de usuario fluida</li>
                </ul>
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">1</span> Crear Proyecto Firebase</h3>
            <p>Primero necesitas crear un proyecto en Firebase Console:</p>
            <ol>
                <li>Ve a <a href="https://console.firebase.google.com/" target="_blank" class="btn btn-secondary">Firebase Console</a></li>
                <li>Haz clic en <strong>"Crear un proyecto"</strong></li>
                <li>Nombra tu proyecto: <span class="highlight">JM-Budget-Central</span></li>
                <li>Habilita Google Analytics (recomendado)</li>
                <li>Haz clic en <strong>"Crear proyecto"</strong></li>
            </ol>
            <div class="success">
                <strong>✅ Completado:</strong> Tu proyecto Firebase centralizado está listo
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">2</span> Configurar Authentication</h3>
            <p>Habilita la autenticación por email y contraseña:</p>
            <ol>
                <li>En el panel de Firebase, ve a <strong>"Authentication"</strong></li>
                <li>Haz clic en <strong>"Comenzar"</strong></li>
                <li>Selecciona la pestaña <strong>"Sign-in method"</strong></li>
                <li>Habilita <strong>"Email/Password"</strong></li>
                <li><strong>Opcional:</strong> Habilita "Email link (passwordless sign-in)"</li>
                <li>Guarda los cambios</li>
            </ol>
            <div class="success">
                <strong>✅ Completado:</strong> Authentication configurado para todos los usuarios
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">3</span> Configurar Firestore Database</h3>
            <p>Crea la base de datos para almacenar los datos de todos los usuarios:</p>
            <ol>
                <li>Ve a <strong>"Firestore Database"</strong></li>
                <li>Haz clic en <strong>"Crear base de datos"</strong></li>
                <li>Selecciona <strong>"Comenzar en modo de prueba"</strong></li>
                <li>Elige la ubicación más cercana (ej: <span class="highlight">us-central1</span>)</li>
                <li>Haz clic en <strong>"Siguiente"</strong> y luego <strong>"Habilitar"</strong></li>
            </ol>
            <div class="warning">
                <strong>⚠️ Importante:</strong> El modo de prueba permite acceso completo por 30 días. 
                Después necesitarás configurar reglas de seguridad (se incluyen automáticamente).
            </div>
            <div class="success">
                <strong>✅ Completado:</strong> Firestore Database creado para todos los usuarios
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">4</span> Obtener Configuración</h3>
            <p>Obtén la configuración necesaria para conectar la aplicación:</p>
            <ol>
                <li>Ve a <strong>"Configuración del proyecto"</strong> (ícono de engranaje)</li>
                <li>Selecciona la pestaña <strong>"General"</strong></li>
                <li>Desplázate hacia abajo hasta <strong>"Tus apps"</strong></li>
                <li>Haz clic en el ícono de web <strong>&lt;/&gt;</strong></li>
                <li>Nombra tu app: <span class="highlight">JM-Budget-Web</span></li>
                <li>Haz clic en <strong>"Registrar app"</strong></li>
                <li>Copia la configuración que aparece</li>
            </ol>
            
            <div class="config-form">
                <h4>Configuración de Firebase Centralizado</h4>
                <p>Reemplaza los valores en el archivo <code>firebase-central-config.js</code>:</p>
                
                <div class="form-group">
                    <label>apiKey:</label>
                    <input type="text" id="apiKey" placeholder="AIzaSyBxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                </div>
                
                <div class="form-group">
                    <label>authDomain:</label>
                    <input type="text" id="authDomain" placeholder="tu-proyecto.firebaseapp.com">
                </div>
                
                <div class="form-group">
                    <label>projectId:</label>
                    <input type="text" id="projectId" placeholder="tu-proyecto-id">
                </div>
                
                <div class="form-group">
                    <label>storageBucket:</label>
                    <input type="text" id="storageBucket" placeholder="tu-proyecto.appspot.com">
                </div>
                
                <div class="form-group">
                    <label>messagingSenderId:</label>
                    <input type="text" id="messagingSenderId" placeholder="123456789">
                </div>
                
                <div class="form-group">
                    <label>appId:</label>
                    <input type="text" id="appId" placeholder="1:123456789:web:abcdef123456">
                </div>
                
                <button class="btn" onclick="generateCentralConfig()">Generar Configuración</button>
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">5</span> Configurar Reglas de Seguridad</h3>
            <p>Configura las reglas de Firestore para proteger los datos de cada usuario:</p>
            <ol>
                <li>Ve a <strong>"Firestore Database"</strong></li>
                <li>Haz clic en la pestaña <strong>"Rules"</strong></li>
                <li>Reemplaza las reglas existentes con las siguientes:</li>
            </ol>
            
            <div class="code-block" id="firestoreRules">
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Los usuarios solo pueden acceder a sus propios datos
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Datos de presupuesto por usuario
    match /users/{userId}/budgets/{budgetId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Transacciones por usuario
    match /users/{userId}/transactions/{transactionId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Categorías por usuario
    match /users/{userId}/categories/{categoryId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Metas por usuario
    match /users/{userId}/goals/{goalId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Cuentas bancarias por usuario
    match /users/{userId}/accounts/{accountId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Configuración por usuario
    match /users/{userId}/settings/{settingId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}</div>
            
            <button class="btn btn-warning" onclick="copyFirestoreRules()">Copiar Reglas</button>
            
            <div class="success">
                <strong>✅ Completado:</strong> Reglas de seguridad configuradas
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">6</span> Aplicar Configuración</h3>
            <p>Una vez que tengas la configuración:</p>
            <ol>
                <li>Descarga el archivo <code>firebase-central-config.js</code></li>
                <li>Reemplaza los valores con tu configuración</li>
                <li>Sube el archivo actualizado a tu servidor</li>
                <li>Recarga la aplicación</li>
            </ol>
            
            <div class="code-block" id="generatedCentralConfig" style="display: none;">
                <pre id="centralConfigCode"></pre>
            </div>
            
            <div class="success">
                <strong>✅ Completado:</strong> Configuración aplicada
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">7</span> ¡Listo para Usuarios!</h3>
            <p>Ahora cualquier usuario puede registrarse sin configuración técnica:</p>
            <ol>
                <li>Ve a la <a href="index.html" class="btn btn-secondary">Aplicación Principal</a></li>
                <li>Los usuarios hacen clic en <strong>"Registrarse"</strong></li>
                <li>Ingresan su email y contraseña</li>
                <li>¡Se crea su cuenta automáticamente!</li>
                <li>Sus datos se sincronizan en la nube</li>
            </ol>
            
            <div class="success">
                <strong>🎉 ¡Felicidades!</strong> Tu aplicación está lista para recibir usuarios sin configuración técnica
            </div>
        </div>

        <div class="benefits">
            <div class="benefit-card">
                <i class="fas fa-users"></i>
                <h4>Usuarios Felices</h4>
                <p>Registro directo sin configuración técnica compleja</p>
            </div>
            <div class="benefit-card">
                <i class="fas fa-cloud"></i>
                <h4>Sincronización Automática</h4>
                <p>Datos disponibles en todos los dispositivos</p>
            </div>
            <div class="benefit-card">
                <i class="fas fa-shield-alt"></i>
                <h4>Seguridad Garantizada</h4>
                <p>Cada usuario solo accede a sus propios datos</p>
            </div>
            <div class="benefit-card">
                <i class="fas fa-cog"></i>
                <h4>Fácil Mantenimiento</h4>
                <p>Una sola configuración para todos los usuarios</p>
            </div>
        </div>

        <div class="nav-buttons">
            <a href="index.html" class="btn">Ir a la Aplicación</a>
            <a href="configurar-firebase.html" class="btn btn-secondary">Configuración Individual</a>
            <a href="GUIA_USUARIO_FINAL.md" class="btn btn-secondary">Guía del Usuario</a>
        </div>

        <div class="warning">
            <h4><i class="fas fa-exclamation-triangle"></i> Notas Importantes:</h4>
            <ul>
                <li><strong>Límites de Firebase:</strong> El plan gratuito incluye 50,000 lecturas/día y 20,000 escrituras/día</li>
                <li><strong>Escalabilidad:</strong> Para más usuarios, considera actualizar al plan Blaze (pago por uso)</li>
                <li><strong>Backup:</strong> Configura backups automáticos para proteger los datos de los usuarios</li>
                <li><strong>Monitoreo:</strong> Usa Firebase Analytics para monitorear el uso de la aplicación</li>
            </ul>
        </div>
    </div>

    <script>
        // Función para generar configuración centralizada
        function generateCentralConfig() {
            const apiKey = document.getElementById('apiKey').value;
            const authDomain = document.getElementById('authDomain').value;
            const projectId = document.getElementById('projectId').value;
            const storageBucket = document.getElementById('storageBucket').value;
            const messagingSenderId = document.getElementById('messagingSenderId').value;
            const appId = document.getElementById('appId').value;
            
            if (!apiKey || !authDomain || !projectId) {
                alert('Por favor completa al menos los campos principales (apiKey, authDomain, projectId)');
                return;
            }
            
            const config = `window.FIREBASE_CENTRAL_CONFIG = {
    // Configuración de Firebase (reemplazar con valores reales)
    apiKey: "${apiKey}",
    authDomain: "${authDomain}",
    projectId: "${projectId}",
    storageBucket: "${storageBucket}",
    messagingSenderId: "${messagingSenderId}",
    appId: "${appId}",
    
    // Configuración de la aplicación
    appName: "JM Budget",
    appVersion: "2.0.6",
    developerEmail: "joemart4@gmail.com",
    
    // Configuración de seguridad
    enableEmailVerification: true,
    allowAnonymousAuth: false,
    maxUsersPerProject: 1000,
    
    // Configuración de datos
    dataRetentionDays: 365,
    maxDataSizePerUser: 10 * 1024 * 1024,
    enableDataExport: true,
    
    // Configuración de notificaciones
    enableEmailNotifications: true,
    enablePushNotifications: true,
    
    // Configuración de backup
    enableAutoBackup: true,
    backupFrequency: "daily",
    maxBackupsPerUser: 10
};`;
            
            document.getElementById('centralConfigCode').textContent = config;
            document.getElementById('generatedCentralConfig').style.display = 'block';
        }
        
        // Función para copiar reglas de Firestore
        function copyFirestoreRules() {
            const rules = document.getElementById('firestoreRules').textContent;
            navigator.clipboard.writeText(rules).then(() => {
                alert('Reglas de Firestore copiadas al portapapeles');
            }).catch(() => {
                alert('No se pudo copiar automáticamente. Selecciona y copia manualmente el texto de las reglas.');
            });
        }
    </script>
</body>
</html> 